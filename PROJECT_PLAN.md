# ğŸ“ Climax ê°•ì˜ íŒë§¤ ì‚¬ì´íŠ¸ êµ¬ì¶• í”Œëœ

> **í”„ë¡œì íŠ¸ëª…**: Climax Learning Platform  
> **ëª©í‘œ**: DRMì´ ì ìš©ëœ ìì²´ ê°•ì˜ íŒë§¤ í”Œë«í¼ êµ¬ì¶•  
> **ê°œë°œ ë°©ì‹**: AI ê¸°ë°˜ ì›¹ ì„œë¹„ìŠ¤ ê°œë°œ (ë°”ì´ë¸Œ ì½”ë”©)  
> **DRM ì†”ë£¨ì…˜**: Vimeo OTT  
> **ì‘ì„±ì¼**: 2026ë…„ 1ì›” 3ì¼  
> **ë¬¸ì„œ ë²„ì „**: 2.0.0

---

## ğŸ’¡ ê°œë… ì´í•´: í•™ì› ì„¤ë¦½ ë¹„ìœ 

ê°•ì˜ ì‚¬ì´íŠ¸ë¥¼ ë§Œë“œëŠ” ê³¼ì •ì€ **ì¢…í•© í•™ì›ì„ ì„¤ë¦½í•˜ëŠ” ê²ƒ**ê³¼ ê°™ìŠµë‹ˆë‹¤:

| í•™ì› ì„¤ë¦½ | ì›¹ ê°œë°œ |
|----------|---------|
| ğŸ—ï¸ ê±´ë¬¼ ì§“ê³  ì¸í…Œë¦¬ì–´ | í”„ë¡œì íŠ¸ ì„¤ì • + ëœë”© í˜ì´ì§€ |
| ğŸª§ í•™ì› ê°„íŒ ë‹¬ê¸° | ë„ë©”ì¸ ì—°ê²° |
| ğŸ“‹ í•™ìƒ ëª…ë¶€ + ì¶œê²° ì‹œìŠ¤í…œ | DB + ë¡œê·¸ì¸ êµ¬í˜„ |
| ğŸ“š êµì¬/ì˜ìƒ ì°½ê³  ë³´ê´€ | ì™¸ë¶€ ì €ì¥ì†Œ (Vimeo, R2) |
| ğŸ’³ ìˆ˜ê°•ë£Œ ê²°ì œ ì‹œìŠ¤í…œ | í† ìŠ¤í˜ì´ë¨¼ì¸  ì—°ë™ |
| ğŸ–¥ï¸ ì›ì¥ë‹˜ ì‚¬ë¬´ì‹¤ | ê´€ë¦¬ì í˜ì´ì§€ |

---

## ğŸ“‹ ëª©ì°¨

1. [í”„ë¡œì íŠ¸ ê°œìš”](#1-í”„ë¡œì íŠ¸-ê°œìš”)
2. [ê¸°ìˆ  ìŠ¤íƒ](#2-ê¸°ìˆ -ìŠ¤íƒ)
3. [6ë‹¨ê³„ ê°œë°œ í”„ë¡œì„¸ìŠ¤](#3-6ë‹¨ê³„-ê°œë°œ-í”„ë¡œì„¸ìŠ¤)
4. [í•µì‹¬ ê¸°ëŠ¥ ëª…ì„¸](#4-í•µì‹¬-ê¸°ëŠ¥-ëª…ì„¸)
5. [ë°ì´í„°ë² ì´ìŠ¤ ì„¤ê³„](#5-ë°ì´í„°ë² ì´ìŠ¤-ì„¤ê³„)
6. [ë³´ì•ˆ ë° ë²•ì  ì¤€ìˆ˜](#6-ë³´ì•ˆ-ë°-ë²•ì -ì¤€ìˆ˜)
7. [ì˜ˆìƒ ë¹„ìš©](#7-ì˜ˆìƒ-ë¹„ìš©)
8. [ì²´í¬ë¦¬ìŠ¤íŠ¸](#8-ì²´í¬ë¦¬ìŠ¤íŠ¸)
9. [ì°¸ê³  ìë£Œ](#9-ì°¸ê³ -ìë£Œ)

---

## 1. í”„ë¡œì íŠ¸ ê°œìš”

### 1.1 ë¹„ì „
- ê³ í’ˆì§ˆ ê°•ì˜ ì½˜í…ì¸ ë¥¼ ì•ˆì „í•˜ê²Œ ì œê³µí•˜ëŠ” ìì²´ í”Œë«í¼
- ë¶ˆë²• ë³µì œ ë°©ì§€ë¥¼ ìœ„í•œ Vimeo DRM ì ìš©
- ì‚¬ìš©ì ì¹œí™”ì ì¸ í•™ìŠµ ê²½í—˜ ì œê³µ
- AI ê¸°ë°˜ ê°œë°œë¡œ íš¨ìœ¨ì ì¸ êµ¬ì¶•

### 1.2 ì£¼ìš” ëª©í‘œ
- [ ] ì•ˆì •ì ì¸ ë™ì˜ìƒ ìŠ¤íŠ¸ë¦¬ë° ì„œë¹„ìŠ¤
- [ ] ì™„ë²½í•œ ì½˜í…ì¸  ë³´í˜¸ (DRM)
- [ ] ì›í™œí•œ ê²°ì œ ì‹œìŠ¤í…œ
- [ ] í•™ìŠµ ì§„ë„ ê´€ë¦¬
- [ ] ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ
- [ ] ê°œì¸ì •ë³´ ë³´í˜¸ ë° ë²•ì  ì¤€ìˆ˜

### 1.3 íƒ€ê²Ÿ ì‚¬ìš©ì
- **í•™ìŠµì**: ê°•ì˜ë¥¼ êµ¬ë§¤í•˜ê³  í•™ìŠµí•˜ëŠ” ì‚¬ìš©ì
- **ê´€ë¦¬ì**: ê°•ì˜ ë“±ë¡, ì‚¬ìš©ì ê´€ë¦¬, ë§¤ì¶œ ê´€ë¦¬

---

## 2. ê¸°ìˆ  ìŠ¤íƒ

### 2.1 Core Stack

| ì˜ì—­ | ê¸°ìˆ  | ìš©ë„ |
|------|------|------|
| **Framework** | Next.js 14 (App Router) | í’€ìŠ¤íƒ í”„ë ˆì„ì›Œí¬ |
| **Language** | TypeScript | íƒ€ì… ì•ˆì •ì„± |
| **Styling** | Tailwind CSS + shadcn/ui | UI êµ¬í˜„ |
| **Database** | Supabase (PostgreSQL) | DB + ì¸ì¦ + ìŠ¤í† ë¦¬ì§€ |
| **Auth** | Supabase Auth | ì†Œì…œ ë¡œê·¸ì¸ |
| **Video** | Vimeo Premium | DRM + ìŠ¤íŠ¸ë¦¬ë° |
| **Storage** | Cloudflare R2 | ê°•ì˜ ìë£Œ ì €ì¥ |
| **Payment** | í† ìŠ¤í˜ì´ë¨¼ì¸  | ê²°ì œ ì²˜ë¦¬ |
| **Hosting** | Vercel | ë°°í¬ |
| **DNS** | Cloudflare | DNS + CDN |

### 2.2 ê°œë°œ ë„êµ¬

| ë„êµ¬ | ìš©ë„ |
|------|------|
| **Cursor / Claude** | AI ê¸°ë°˜ ì½”ë”© (ë°”ì´ë¸Œ ì½”ë”©) |
| **Git + GitHub** | ë²„ì „ ê´€ë¦¬ |
| **VS Code** | ì½”ë“œ ì—ë””í„° |
| **Supabase MCP** | AI SQL ê²€ì¦ |

---

## 3. 6ë‹¨ê³„ ê°œë°œ í”„ë¡œì„¸ìŠ¤

### ğŸ“Š ì „ì²´ ì¼ì • (12ì£¼)

```
Step 1: í”„ë¡œì íŠ¸ ì´ˆê¸° ì„¤ì • + ëœë”© í˜ì´ì§€ â–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ Week 1-2
Step 2: ë„ë©”ì¸ ì—°ê²° + ë°°í¬              â–‘â–‘â–‘â–‘â–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ Week 3
Step 3: DB + íšŒì›ê°€ì… êµ¬í˜„              â–‘â–‘â–‘â–‘â–‘â–‘â–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ Week 4-5
Step 4: ì™¸ë¶€ ì €ì¥ì†Œ + ê²°ì œ ì‹œìŠ¤í…œ       â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘ Week 6-8
Step 5: ê´€ë¦¬ì í˜ì´ì§€ + ìš´ì˜ ì‹œìŠ¤í…œ     â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘ Week 9-11
Step 6: ìµœì¢… ì ê²€ + ëŸ°ì¹­               â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–ˆâ–ˆ Week 12
```

---

### Step 1ï¸âƒ£ í”„ë¡œì íŠ¸ ì´ˆê¸° ì„¤ì • ë° ëœë”© í˜ì´ì§€ ì œì‘ (Week 1-2)

ì„œë¹„ìŠ¤ì˜ ì–¼êµ´ì´ ë  ì‚¬ì´íŠ¸ ì™¸í˜•ì„ ë§Œë“¤ê³  ê´€ë¦¬ í™˜ê²½ì„ êµ¬ì¶•í•©ë‹ˆë‹¤.

#### 1.1 í”„ë¡œì íŠ¸ ìƒì„±

```bash
# Next.js í”„ë¡œì íŠ¸ ìƒì„± (í´ë”ëª…: ì˜ë¬¸ ì†Œë¬¸ì + í•˜ì´í”ˆ)
npx create-next-app@latest climax-web --typescript --tailwind --app --src-dir

# í”„ë¡œì íŠ¸ í´ë” ì´ë™
cd climax-web

# í•„ìˆ˜ íŒ¨í‚¤ì§€ ì„¤ì¹˜
npm install @supabase/supabase-js @supabase/ssr
npm install lucide-react class-variance-authority clsx tailwind-merge
npm install @tanstack/react-query zustand
npm install @vimeo/player
```

#### 1.2 shadcn/ui ì„¤ì •

```bash
# shadcn/ui ì´ˆê¸°í™”
npx shadcn@latest init

# í•„ìš”í•œ ì»´í¬ë„ŒíŠ¸ ì„¤ì¹˜
npx shadcn@latest add button card input label
npx shadcn@latest add dialog dropdown-menu avatar
npx shadcn@latest add tabs table badge
```

#### 1.3 ë²„ì „ ê´€ë¦¬ (Git + GitHub)

```bash
# Git ì´ˆê¸°í™” ë° GitHub ì—°ë™
git init
git add .
git commit -m "Initial commit: Next.js project setup"

# GitHub ì €ì¥ì†Œ ìƒì„± í›„
git remote add origin https://github.com/username/climax-web.git
git push -u origin main
```

#### 1.4 ëœë”© í˜ì´ì§€ êµ¬ì„± (AI í™œìš©)

AI(Cursor/Claude)ì— ì•„ë˜ í”„ë¡¬í”„íŠ¸ë¡œ ê° ì„¹ì…˜ ìƒì„±:

```
ğŸ“ AI í”„ë¡¬í”„íŠ¸ ì˜ˆì‹œ:

"Next.js 14 App Routerë¥¼ ì‚¬ìš©í•˜ëŠ” ê°•ì˜ íŒë§¤ ì‚¬ì´íŠ¸ì˜ ëœë”© í˜ì´ì§€ë¥¼ ë§Œë“¤ì–´ì¤˜.
ë‹¤ìŒ 6ê°œ ì„¹ì…˜ìœ¼ë¡œ êµ¬ì„±í•´ì¤˜:

1. Header: ë¡œê³ , ë„¤ë¹„ê²Œì´ì…˜ ë©”ë‰´ (ê°•ì˜ ëª©ë¡, ê°€ê²©, ë¡œê·¸ì¸)
2. Hero Section: ë©”ì¸ íƒ€ì´í‹€, ì„œë¸Œ íƒ€ì´í‹€, CTA ë²„íŠ¼, íˆì–´ë¡œ ì´ë¯¸ì§€
3. ê°•ì˜ ì†Œê°œ: 3ê°œì˜ ê°•ì˜ ì¹´ë“œ (ì¸ë„¤ì¼, ì œëª©, ê°€ê²©, ìˆ˜ê°•ìƒ ìˆ˜)
4. ìƒ˜í”Œ ê°¤ëŸ¬ë¦¬: ë¬´ë£Œ ë¯¸ë¦¬ë³´ê¸° ì˜ìƒ ì„¹ì…˜
5. CTA Section: ê²°ì œ ìœ ë„ ë¬¸êµ¬, ê°€ê²© ì •ë³´, êµ¬ë§¤ ë²„íŠ¼
6. Footer: ì—°ë½ì²˜, ì†Œì…œ ë§í¬, ì´ìš©ì•½ê´€/ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨

Tailwind CSSì™€ shadcn/uië¥¼ ì‚¬ìš©í•˜ê³ , ë°˜ì‘í˜•ìœ¼ë¡œ ë§Œë“¤ì–´ì¤˜."
```

#### 1.5 ì´ë¯¸ì§€ ìµœì í™”

```
public/
â”œâ”€â”€ images/
â”‚   â”œâ”€â”€ hero/
â”‚   â”‚   â””â”€â”€ main-hero.webp      # WebP í˜•ì‹ ì‚¬ìš©!
â”‚   â”œâ”€â”€ courses/
â”‚   â”‚   â”œâ”€â”€ course-1.webp
â”‚   â”‚   â””â”€â”€ course-2.webp
â”‚   â””â”€â”€ logos/
â”‚       â””â”€â”€ logo.svg
â””â”€â”€ fonts/
    â””â”€â”€ pretendard.woff2
```

> âš ï¸ **ì¤‘ìš”**: PNG/JPG ëŒ€ì‹  **WebP í˜•ì‹** ì‚¬ìš©ìœ¼ë¡œ ë¡œë”© ì†ë„ í–¥ìƒ

#### 1.6 Week 1-2 ì²´í¬ë¦¬ìŠ¤íŠ¸

- [ ] Next.js í”„ë¡œì íŠ¸ ìƒì„± (ì˜ë¬¸ ì†Œë¬¸ì + í•˜ì´í”ˆ í´ë”ëª…)
- [ ] TypeScript + Tailwind CSS ì„¤ì •
- [ ] shadcn/ui ì»´í¬ë„ŒíŠ¸ ì„¤ì¹˜
- [ ] Git ì´ˆê¸°í™” + GitHub ì—°ë™
- [ ] ëœë”© í˜ì´ì§€ 6ê°œ ì„¹ì…˜ ì™„ì„±
  - [ ] Header
  - [ ] Hero Section
  - [ ] ê°•ì˜ ì†Œê°œ ì¸í„°í˜ì´ìŠ¤
  - [ ] ìƒ˜í”Œ ê°¤ëŸ¬ë¦¬
  - [ ] CTA (ê²°ì œ ìœ ë„)
  - [ ] Footer
- [ ] ì´ë¯¸ì§€ WebP ë³€í™˜ ë° ìµœì í™”
- [ ] ë°˜ì‘í˜• ë ˆì´ì•„ì›ƒ í™•ì¸

---

### Step 2ï¸âƒ£ ë„ë©”ì¸ ì—°ê²° ë° ë°°í¬ (Week 3)

ì‚¬ì´íŠ¸ë¥¼ ì˜¨ë¼ì¸ì— ê³µê°œí•˜ê³  ì ‘ì† ì£¼ì†Œë¥¼ ì„¤ì •í•©ë‹ˆë‹¤.

#### 2.1 Vercel ë°°í¬

```bash
# Vercel CLI ì„¤ì¹˜ (ì„ íƒì‚¬í•­)
npm i -g vercel

# ë°°í¬ (ë˜ëŠ” Vercel ì›¹ì‚¬ì´íŠ¸ì—ì„œ GitHub ì—°ë™)
vercel
```

**Vercel ì›¹ ë°°í¬ ë°©ë²•:**
1. [vercel.com](https://vercel.com) ì ‘ì†
2. "Add New Project" í´ë¦­
3. GitHub ì €ì¥ì†Œ ì—°ê²°
4. "Deploy" í´ë¦­

#### 2.2 ë„ë©”ì¸ êµ¬ë§¤

ì¶”ì²œ ë„ë©”ì¸ ë“±ë¡ ì—…ì²´:
- **í˜¸ìŠ¤íŒ…KR** (hosting.kr) - í•œêµ­
- **ê°€ë¹„ì•„** (gabia.com) - í•œêµ­
- **Namecheap** - í•´ì™¸

#### 2.3 Cloudflare DNS ì„¤ì •

1. [Cloudflare](https://cloudflare.com) ê³„ì • ìƒì„±
2. ë„ë©”ì¸ ì¶”ê°€
3. ë„¤ì„ì„œë²„ ë³€ê²½ (ë„ë©”ì¸ ë“±ë¡ ì—…ì²´ì—ì„œ)

```
# Cloudflare ë„¤ì„ì„œë²„ ì˜ˆì‹œ
ns1.cloudflare.com
ns2.cloudflare.com
```

4. DNS ë ˆì½”ë“œ ì„¤ì •:

| Type | Name | Content | Proxy |
|------|------|---------|-------|
| A | @ | 76.76.21.21 | Proxied |
| CNAME | www | cname.vercel-dns.com | Proxied |

#### 2.4 Vercel ë„ë©”ì¸ ì—°ê²°

1. Vercel í”„ë¡œì íŠ¸ â†’ Settings â†’ Domains
2. êµ¬ë§¤í•œ ë„ë©”ì¸ ì…ë ¥
3. DNS ì„¤ì • ì™„ë£Œ ëŒ€ê¸° (ìµœëŒ€ 48ì‹œê°„, ë³´í†µ ëª‡ ë¶„)

#### 2.5 Week 3 ì²´í¬ë¦¬ìŠ¤íŠ¸

- [ ] Vercel ê³„ì • ìƒì„±
- [ ] GitHub ì €ì¥ì†Œ ì—°ê²°
- [ ] ì²« ë°°í¬ ì„±ê³µ
- [ ] ë„ë©”ì¸ êµ¬ë§¤
- [ ] Cloudflare ê³„ì • ìƒì„±
- [ ] ë„¤ì„ì„œë²„ ë³€ê²½
- [ ] DNS ë ˆì½”ë“œ ì„¤ì • (A, CNAME)
- [ ] Vercel ë„ë©”ì¸ ì—°ê²°
- [ ] SSL ì¸ì¦ì„œ ìë™ ë°œê¸‰ í™•ì¸
- [ ] https://yourdomain.com ì ‘ì† í™•ì¸

---

### Step 3ï¸âƒ£ ë°ì´í„°ë² ì´ìŠ¤ ë° íšŒì›ê°€ì… êµ¬í˜„ (Week 4-5)

ê°•ì˜ ê²°ì œ ì •ë³´ì™€ ì‚¬ìš©ì ë°ì´í„°ë¥¼ ì €ì¥í•  í™˜ê²½ì„ êµ¬ì¶•í•©ë‹ˆë‹¤.

#### 3.1 Supabase í”„ë¡œì íŠ¸ ìƒì„±

1. [supabase.com](https://supabase.com) ì ‘ì†
2. "New Project" í´ë¦­
3. í”„ë¡œì íŠ¸ ì •ë³´ ì…ë ¥:
   - Name: climax-web
   - Database Password: (ê°•ë ¥í•œ ë¹„ë°€ë²ˆí˜¸)
   - Region: Northeast Asia (Seoul)

#### 3.2 í™˜ê²½ ë³€ìˆ˜ ì„¤ì •

```env
# .env.local
NEXT_PUBLIC_SUPABASE_URL=https://xxxxx.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJxxxxx...
SUPABASE_SERVICE_ROLE_KEY=eyJxxxxx...

# ì•”í˜¸í™” í‚¤ (32ë°”ì´íŠ¸)
ENCRYPTION_KEY=your-32-byte-encryption-key-here
```

#### 3.3 Supabase í´ë¼ì´ì–¸íŠ¸ ì„¤ì •

```typescript
// lib/supabase/client.ts
import { createBrowserClient } from '@supabase/ssr'

export function createClient() {
  return createBrowserClient(
    process.env.NEXT_PUBLIC_SUPABASE_URL!,
    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!
  )
}
```

```typescript
// lib/supabase/server.ts
import { createServerClient } from '@supabase/ssr'
import { cookies } from 'next/headers'

export async function createClient() {
  const cookieStore = await cookies()

  return createServerClient(
    process.env.NEXT_PUBLIC_SUPABASE_URL!,
    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!,
    {
      cookies: {
        getAll() {
          return cookieStore.getAll()
        },
        setAll(cookiesToSet) {
          try {
            cookiesToSet.forEach(({ name, value, options }) =>
              cookieStore.set(name, value, options)
            )
          } catch {}
        },
      },
    }
  )
}
```

#### 3.4 profiles í…Œì´ë¸” ìƒì„±

```sql
-- supabase/migrations/001_create_profiles.sql

-- profiles í…Œì´ë¸” ìƒì„±
CREATE TABLE profiles (
  id UUID PRIMARY KEY REFERENCES auth.users(id) ON DELETE CASCADE,
  email_encrypted TEXT,           -- AES-256 ì•”í˜¸í™”
  name_encrypted TEXT,            -- AES-256 ì•”í˜¸í™”
  nickname TEXT,
  avatar_url TEXT,
  role TEXT DEFAULT 'user' CHECK (role IN ('user', 'admin')),
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW()
);

-- RLS í™œì„±í™”
ALTER TABLE profiles ENABLE ROW LEVEL SECURITY;

-- RLS ì •ì±…: ë³¸ì¸ ë°ì´í„°ë§Œ ì¡°íšŒ
CREATE POLICY "Users can view own profile"
  ON profiles FOR SELECT
  USING (auth.uid() = id);

-- RLS ì •ì±…: ë³¸ì¸ ë°ì´í„°ë§Œ ìˆ˜ì •
CREATE POLICY "Users can update own profile"
  ON profiles FOR UPDATE
  USING (auth.uid() = id);

-- ìë™ í”„ë¡œí•„ ìƒì„± íŠ¸ë¦¬ê±°
CREATE OR REPLACE FUNCTION handle_new_user()
RETURNS TRIGGER AS $$
BEGIN
  INSERT INTO profiles (id, nickname)
  VALUES (NEW.id, NEW.raw_user_meta_data->>'name');
  RETURN NEW;
END;
$$ LANGUAGE plpgsql SECURITY DEFINER;

CREATE TRIGGER on_auth_user_created
  AFTER INSERT ON auth.users
  FOR EACH ROW EXECUTE FUNCTION handle_new_user();
```

#### 3.5 ì†Œì…œ ë¡œê·¸ì¸ ì„¤ì •

**Google OAuth:**
1. [Google Cloud Console](https://console.cloud.google.com) ì ‘ì†
2. OAuth 2.0 í´ë¼ì´ì–¸íŠ¸ ID ìƒì„±
3. Supabase Dashboard â†’ Authentication â†’ Providers â†’ Google
4. Client ID, Secret ì…ë ¥

**Kakao OAuth:**
1. [Kakao Developers](https://developers.kakao.com) ì ‘ì†
2. ì• í”Œë¦¬ì¼€ì´ì…˜ ìƒì„±
3. ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ í™œì„±í™”
4. Redirect URI: `https://xxxxx.supabase.co/auth/v1/callback`

#### 3.6 ë¡œê·¸ì¸ ì»´í¬ë„ŒíŠ¸

```typescript
// components/auth/LoginButton.tsx
'use client'

import { createClient } from '@/lib/supabase/client'
import { Button } from '@/components/ui/button'

export function GoogleLoginButton() {
  const supabase = createClient()

  const handleLogin = async () => {
    await supabase.auth.signInWithOAuth({
      provider: 'google',
      options: {
        redirectTo: `${window.location.origin}/auth/callback`
      }
    })
  }

  return (
    <Button onClick={handleLogin} variant="outline" className="w-full">
      <img src="/images/google-icon.svg" className="w-5 h-5 mr-2" />
      Googleë¡œ ê³„ì†í•˜ê¸°
    </Button>
  )
}
```

#### 3.7 Week 4-5 ì²´í¬ë¦¬ìŠ¤íŠ¸

- [ ] Supabase í”„ë¡œì íŠ¸ ìƒì„±
- [ ] í™˜ê²½ ë³€ìˆ˜ ì„¤ì • (.env.local)
- [ ] Supabase í´ë¼ì´ì–¸íŠ¸ ì„¤ì • (client, server)
- [ ] profiles í…Œì´ë¸” ìƒì„±
- [ ] RLS ì •ì±… ì„¤ì •
- [ ] ìë™ í”„ë¡œí•„ ìƒì„± íŠ¸ë¦¬ê±°
- [ ] Google OAuth ì„¤ì •
- [ ] Kakao OAuth ì„¤ì •
- [ ] ë¡œê·¸ì¸/íšŒì›ê°€ì… í˜ì´ì§€ UI
- [ ] ì¸ì¦ ì½œë°± ì²˜ë¦¬
- [ ] ë¡œê·¸ì•„ì›ƒ ê¸°ëŠ¥
- [ ] í”„ë¡œí•„ í˜ì´ì§€

---

### Step 4ï¸âƒ£ ì™¸ë¶€ ì €ì¥ì†Œ ë° ê²°ì œ ì‹œìŠ¤í…œ êµ¬ì¶• (Week 6-8)

ê°•ì˜ ì˜ìƒê³¼ ìë£Œë¥¼ ì €ì¥í•˜ê³  ì‹¤ì œ ìˆ˜ìµì„ ì°½ì¶œí•˜ëŠ” í•µì‹¬ ë‹¨ê³„ì…ë‹ˆë‹¤.

#### 4.1 Vimeo DRM ì„¤ì •

**Vimeo í”Œëœ ì„ íƒ:**
| í”Œëœ | ê°€ê²© | DRM | ê¶Œì¥ |
|------|------|-----|------|
| Pro | $20/ì›” | âŒ | |
| Business | $50/ì›” | ë„ë©”ì¸ ì œí•œë§Œ | |
| **Premium** | **$75/ì›”** | **âœ… í’€ DRM** | **â­ ê¶Œì¥** |
| Enterprise | ë¬¸ì˜ | âœ… ìµœê³  ìˆ˜ì¤€ | |

**Vimeo API ì„¤ì •:**
1. [Vimeo Developer](https://developer.vimeo.com) ì ‘ì†
2. "Create App" í´ë¦­
3. Access Token ìƒì„±

```env
# .env.localì— ì¶”ê°€
VIMEO_ACCESS_TOKEN=your_access_token
VIMEO_CLIENT_ID=your_client_id
VIMEO_CLIENT_SECRET=your_client_secret
```

**ë¹„ë””ì˜¤ í”Œë ˆì´ì–´ ì»´í¬ë„ŒíŠ¸:**

```typescript
// components/video/VideoPlayer.tsx
'use client'

import { useEffect, useRef } from 'react'
import Player from '@vimeo/player'

interface VideoPlayerProps {
  vimeoId: string
  onProgress?: (seconds: number, percent: number) => void
  onEnded?: () => void
  startTime?: number
}

export function VideoPlayer({ vimeoId, onProgress, onEnded, startTime = 0 }: VideoPlayerProps) {
  const containerRef = useRef<HTMLDivElement>(null)
  const playerRef = useRef<Player | null>(null)

  useEffect(() => {
    if (!containerRef.current) return

    playerRef.current = new Player(containerRef.current, {
      id: parseInt(vimeoId),
      responsive: true,
      dnt: true,
    })

    if (startTime > 0) {
      playerRef.current.setCurrentTime(startTime)
    }

    playerRef.current.on('timeupdate', (data) => {
      onProgress?.(data.seconds, data.percent)
    })

    playerRef.current.on('ended', () => onEnded?.())

    return () => { playerRef.current?.destroy() }
  }, [vimeoId])

  return <div ref={containerRef} className="aspect-video w-full rounded-lg overflow-hidden" />
}
```

**Vimeo ë³´ì•ˆ ì„¤ì •:**
1. Video Settings â†’ Privacy â†’ "Hide from Vimeo"
2. Embed â†’ "Specific domains only"
3. Download â†’ ë¹„í™œì„±í™”

#### 4.2 Cloudflare R2 ì—°ë™ (ê°•ì˜ ìë£Œ ì €ì¥)

1. [Cloudflare Dashboard](https://dash.cloudflare.com) ì ‘ì†
2. R2 â†’ Create Bucket â†’ "climax-assets"
3. API Token ìƒì„±

```env
# .env.localì— ì¶”ê°€
R2_ACCOUNT_ID=your_account_id
R2_ACCESS_KEY_ID=your_access_key
R2_SECRET_ACCESS_KEY=your_secret_key
R2_BUCKET_NAME=climax-assets
```

```typescript
// lib/r2.ts
import { S3Client, PutObjectCommand, GetObjectCommand } from '@aws-sdk/client-s3'
import { getSignedUrl } from '@aws-sdk/s3-request-presigner'

const r2Client = new S3Client({
  region: 'auto',
  endpoint: `https://${process.env.R2_ACCOUNT_ID}.r2.cloudflarestorage.com`,
  credentials: {
    accessKeyId: process.env.R2_ACCESS_KEY_ID!,
    secretAccessKey: process.env.R2_SECRET_ACCESS_KEY!,
  },
})

// íŒŒì¼ ì—…ë¡œë“œ
export async function uploadFile(key: string, body: Buffer, contentType: string) {
  await r2Client.send(new PutObjectCommand({
    Bucket: process.env.R2_BUCKET_NAME,
    Key: key,
    Body: body,
    ContentType: contentType,
  }))
  return key
}

// ì„œëª…ëœ ë‹¤ìš´ë¡œë“œ URL ìƒì„± (1ì‹œê°„ ìœ íš¨)
export async function getDownloadUrl(key: string) {
  const command = new GetObjectCommand({
    Bucket: process.env.R2_BUCKET_NAME,
    Key: key,
  })
  return await getSignedUrl(r2Client, command, { expiresIn: 3600 })
}
```

#### 4.3 í† ìŠ¤í˜ì´ë¨¼ì¸  ì—°ë™

**ê°€ë§¹ì  ì‹ ì²­:**
1. [í† ìŠ¤í˜ì´ë¨¼ì¸ ](https://www.tosspayments.com) ê°€ë§¹ì  ì‹ ì²­
2. í…ŒìŠ¤íŠ¸ API í‚¤ ë°œê¸‰
3. ê°œë°œ ì™„ë£Œ í›„ ì‹¤ ì„œë¹„ìŠ¤ í‚¤ë¡œ ì „í™˜

```env
# .env.localì— ì¶”ê°€ (í…ŒìŠ¤íŠ¸ í‚¤)
NEXT_PUBLIC_TOSS_CLIENT_KEY=test_ck_xxx
TOSS_SECRET_KEY=test_sk_xxx
```

**ê²°ì œ ìœ„ì ¯ ì„¤ì •:**

```typescript
// components/payment/TossPayment.tsx
'use client'

import { useEffect, useRef } from 'react'
import { loadTossPayments, TossPaymentsWidgets } from '@tosspayments/tosspayments-sdk'

interface PaymentProps {
  orderId: string
  orderName: string
  amount: number
  customerEmail: string
  customerName: string
}

export function TossPayment({ orderId, orderName, amount, customerEmail, customerName }: PaymentProps) {
  const widgetsRef = useRef<TossPaymentsWidgets | null>(null)

  useEffect(() => {
    async function initWidget() {
      const tossPayments = await loadTossPayments(process.env.NEXT_PUBLIC_TOSS_CLIENT_KEY!)
      const widgets = tossPayments.widgets({ customerKey: orderId })
      widgetsRef.current = widgets

      await widgets.setAmount({ currency: 'KRW', value: amount })
      await widgets.renderPaymentMethods({
        selector: '#payment-methods',
        variantKey: 'DEFAULT',
      })
      await widgets.renderAgreement({
        selector: '#agreement',
        variantKey: 'AGREEMENT',
      })
    }
    initWidget()
  }, [amount, orderId])

  const handlePayment = async () => {
    await widgetsRef.current?.requestPayment({
      orderId,
      orderName,
      customerEmail,
      customerName,
      successUrl: `${window.location.origin}/payment/success`,
      failUrl: `${window.location.origin}/payment/fail`,
    })
  }

  return (
    <div className="space-y-4">
      <div id="payment-methods" />
      <div id="agreement" />
      <button
        onClick={handlePayment}
        className="w-full bg-blue-600 text-white py-3 rounded-lg font-semibold"
      >
        {amount.toLocaleString()}ì› ê²°ì œí•˜ê¸°
      </button>
    </div>
  )
}
```

**ê²°ì œ ìŠ¹ì¸ API:**

```typescript
// app/api/payments/confirm/route.ts
import { NextRequest, NextResponse } from 'next/server'

export async function POST(request: NextRequest) {
  const { paymentKey, orderId, amount } = await request.json()

  const response = await fetch('https://api.tosspayments.com/v1/payments/confirm', {
    method: 'POST',
    headers: {
      Authorization: `Basic ${Buffer.from(process.env.TOSS_SECRET_KEY + ':').toString('base64')}`,
      'Content-Type': 'application/json',
    },
    body: JSON.stringify({ paymentKey, orderId, amount }),
  })

  const data = await response.json()

  if (!response.ok) {
    return NextResponse.json({ error: data.message }, { status: 400 })
  }

  // TODO: DBì— ê²°ì œ ì •ë³´ ì €ì¥, ìˆ˜ê°•ê¶Œ ì§€ê¸‰

  return NextResponse.json(data)
}
```

#### 4.4 í¬ë ˆë”§ ì‹œìŠ¤í…œ ì„¤ê³„ (ì„ ì…ì„ ì¶œ FIFO)

```sql
-- í¬ë ˆë”§ í…Œì´ë¸”
CREATE TABLE credits (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID REFERENCES profiles(id) ON DELETE CASCADE,
  amount INT NOT NULL,
  remaining INT NOT NULL,
  source TEXT NOT NULL, -- 'purchase', 'refund', 'bonus'
  order_id UUID,
  expires_at TIMESTAMPTZ,
  created_at TIMESTAMPTZ DEFAULT NOW()
);

-- í¬ë ˆë”§ ì‚¬ìš© ë‚´ì—­
CREATE TABLE credit_usage (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID REFERENCES profiles(id),
  credit_id UUID REFERENCES credits(id),
  amount INT NOT NULL,
  course_id UUID,
  created_at TIMESTAMPTZ DEFAULT NOW()
);
```

#### 4.5 Week 6-8 ì²´í¬ë¦¬ìŠ¤íŠ¸

- [ ] Vimeo Premium ê³„ì • ìƒì„±
- [ ] Vimeo API ì—°ë™
- [ ] ë¹„ë””ì˜¤ í”Œë ˆì´ì–´ êµ¬í˜„
- [ ] Vimeo ë³´ì•ˆ ì„¤ì • (ë„ë©”ì¸ ì œí•œ, DRM)
- [ ] Cloudflare R2 ë²„í‚· ìƒì„±
- [ ] R2 íŒŒì¼ ì—…ë¡œë“œ/ë‹¤ìš´ë¡œë“œ êµ¬í˜„
- [ ] í† ìŠ¤í˜ì´ë¨¼ì¸  ê°€ë§¹ì  ì‹ ì²­
- [ ] ê²°ì œ ìœ„ì ¯ êµ¬í˜„
- [ ] ê²°ì œ ìŠ¹ì¸ API
- [ ] ê²°ì œ ì„±ê³µ/ì‹¤íŒ¨ í˜ì´ì§€
- [ ] í¬ë ˆë”§ ì‹œìŠ¤í…œ êµ¬í˜„
- [ ] í™˜ë¶ˆ ì •ì±… ë° ë¡œì§

---

### Step 5ï¸âƒ£ ê´€ë¦¬ì í˜ì´ì§€ ë° ìš´ì˜ ì‹œìŠ¤í…œ (Week 9-11)

ìš´ì˜ìê°€ ê°•ì˜ íŒë§¤ í˜„í™©ì„ ê´€ë¦¬í•˜ê³  ë³´ì•ˆì„ ìœ ì§€í•˜ëŠ” ë‹¨ê³„ì…ë‹ˆë‹¤.

#### 5.1 ê´€ë¦¬ì í˜ì´ì§€ êµ¬ì„±

```
app/admin/
â”œâ”€â”€ layout.tsx          # ê´€ë¦¬ì ë ˆì´ì•„ì›ƒ + ê¶Œí•œ ì²´í¬
â”œâ”€â”€ page.tsx            # ëŒ€ì‹œë³´ë“œ (ë§¤ì¶œ, í†µê³„)
â”œâ”€â”€ users/
â”‚   â””â”€â”€ page.tsx        # íšŒì› ê´€ë¦¬
â”œâ”€â”€ orders/
â”‚   â””â”€â”€ page.tsx        # ê²°ì œ/í™˜ë¶ˆ ê´€ë¦¬
â”œâ”€â”€ courses/
â”‚   â”œâ”€â”€ page.tsx        # ê°•ì˜ ëª©ë¡
â”‚   â””â”€â”€ [id]/edit/
â”‚       â””â”€â”€ page.tsx    # ê°•ì˜ ìˆ˜ì •
â””â”€â”€ settings/
    â””â”€â”€ page.tsx        # ì„¤ì •
```

**ê´€ë¦¬ì ê¶Œí•œ ì²´í¬:**

```typescript
// app/admin/layout.tsx
import { redirect } from 'next/navigation'
import { createClient } from '@/lib/supabase/server'

export default async function AdminLayout({ children }: { children: React.ReactNode }) {
  const supabase = await createClient()
  const { data: { user } } = await supabase.auth.getUser()

  if (!user) {
    redirect('/login')
  }

  const { data: profile } = await supabase
    .from('profiles')
    .select('role')
    .eq('id', user.id)
    .single()

  if (profile?.role !== 'admin') {
    redirect('/')
  }

  return (
    <div className="flex min-h-screen">
      <AdminSidebar />
      <main className="flex-1 p-8">{children}</main>
    </div>
  )
}
```

#### 5.2 ëŒ€ì‹œë³´ë“œ í†µê³„

```typescript
// app/admin/page.tsx
import { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card'

export default async function AdminDashboard() {
  // TODO: ì‹¤ì œ ë°ì´í„° ì¡°íšŒ
  const stats = {
    todayRevenue: 1250000,
    monthlyRevenue: 15800000,
    totalUsers: 1234,
    activeUsers: 456,
  }

  return (
    <div className="space-y-8">
      <h1 className="text-3xl font-bold">ëŒ€ì‹œë³´ë“œ</h1>

      <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
        <Card>
          <CardHeader>
            <CardTitle className="text-sm text-gray-500">ì˜¤ëŠ˜ ë§¤ì¶œ</CardTitle>
          </CardHeader>
          <CardContent>
            <p className="text-2xl font-bold">
              â‚©{stats.todayRevenue.toLocaleString()}
            </p>
          </CardContent>
        </Card>

        <Card>
          <CardHeader>
            <CardTitle className="text-sm text-gray-500">ì´ë²ˆ ë‹¬ ë§¤ì¶œ</CardTitle>
          </CardHeader>
          <CardContent>
            <p className="text-2xl font-bold">
              â‚©{stats.monthlyRevenue.toLocaleString()}
            </p>
          </CardContent>
        </Card>

        <Card>
          <CardHeader>
            <CardTitle className="text-sm text-gray-500">ì „ì²´ íšŒì›</CardTitle>
          </CardHeader>
          <CardContent>
            <p className="text-2xl font-bold">{stats.totalUsers}ëª…</p>
          </CardContent>
        </Card>

        <Card>
          <CardHeader>
            <CardTitle className="text-sm text-gray-500">í™œì„± íšŒì›</CardTitle>
          </CardHeader>
          <CardContent>
            <p className="text-2xl font-bold">{stats.activeUsers}ëª…</p>
          </CardContent>
        </Card>
      </div>

      {/* ë§¤ì¶œ ê·¸ë˜í”„, ìµœê·¼ ì£¼ë¬¸ ë“± */}
    </div>
  )
}
```

#### 5.3 Week 9-11 ì²´í¬ë¦¬ìŠ¤íŠ¸

- [ ] ê´€ë¦¬ì ë ˆì´ì•„ì›ƒ + ê¶Œí•œ ì²´í¬
- [ ] ëŒ€ì‹œë³´ë“œ (ë§¤ì¶œ í†µê³„, ì°¨íŠ¸)
- [ ] íšŒì› ê´€ë¦¬ í˜ì´ì§€
- [ ] ê²°ì œ/í™˜ë¶ˆ ê´€ë¦¬
- [ ] ê°•ì˜ ê´€ë¦¬ (CRUD)
- [ ] ì¿ í° ê´€ë¦¬
- [ ] ê³µì§€ì‚¬í•­ ê´€ë¦¬
- [ ] ê°œì¸ì •ë³´ ì•”í˜¸í™” (AES-256)
- [ ] ì ‘ì† ë¡œê·¸ ê¸°ë¡
- [ ] 90ì¼ ë¡œê·¸ ìë™ ì‚­ì œ

---

### Step 6ï¸âƒ£ ìµœì¢… ì ê²€ ë° ëŸ°ì¹­ (Week 12)

ì„œë¹„ìŠ¤ ì¶œì‹œ ì „ ë§ˆì§€ë§‰ ìµœì í™” ì‘ì—…ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.

#### 6.1 ë³´ì•ˆ ì ê²€

```bash
# Supabase ë³´ì•ˆ ì ê²€
- Dashboard â†’ Database â†’ Security Advisor í™•ì¸
- RLS ì •ì±… ì¬ê²€í† 
- API í‚¤ ë…¸ì¶œ ì—¬ë¶€ í™•ì¸
```

#### 6.2 ì„±ëŠ¥ ìµœì í™”

```typescript
// next.config.js
/** @type {import('next').NextConfig} */
const nextConfig = {
  images: {
    formats: ['image/avif', 'image/webp'],
    remotePatterns: [
      { protocol: 'https', hostname: '*.supabase.co' },
      { protocol: 'https', hostname: 'i.vimeocdn.com' },
    ],
  },
  experimental: {
    optimizePackageImports: ['lucide-react'],
  },
}

module.exports = nextConfig
```

#### 6.3 ë°˜ì‘í˜• ì²´í¬

- [ ] PC (1920px, 1440px, 1280px)
- [ ] íƒœë¸”ë¦¿ (1024px, 768px)
- [ ] ëª¨ë°”ì¼ (425px, 375px, 320px)

#### 6.4 ìµœì¢… ì½”ë“œ ì •ë¦¬

- [ ] í•˜ë“œì½”ë”©ëœ ë¯¼ê° ì •ë³´ ì œê±°
- [ ] `console.log` ì œê±°
- [ ] ë¯¸ì‚¬ìš© ì½”ë“œ/import ì œê±°
- [ ] TypeScript ì—ëŸ¬ í•´ê²°
- [ ] ESLint ê²½ê³  í•´ê²°

#### 6.5 Week 12 ì²´í¬ë¦¬ìŠ¤íŠ¸

- [ ] Supabase Security Advisor ì ê²€
- [ ] RLS ì •ì±… ìµœì¢… ê²€í† 
- [ ] ì„±ëŠ¥ ìµœì í™” (ì´ë¯¸ì§€, ë²ˆë“¤ ì‚¬ì´ì¦ˆ)
- [ ] ë°˜ì‘í˜• ì „ ê¸°ê¸° í…ŒìŠ¤íŠ¸
- [ ] ê²°ì œ ì‹¤ì œ í…ŒìŠ¤íŠ¸ (í…ŒìŠ¤íŠ¸ í‚¤ â†’ ì‹¤ ì„œë¹„ìŠ¤ í‚¤)
- [ ] ì´ë©”ì¼ ë°œì†¡ í…ŒìŠ¤íŠ¸
- [ ] ì½”ë“œ ì •ë¦¬ (console.log, í•˜ë“œì½”ë”© ì œê±°)
- [ ] robots.txt, sitemap.xml ìƒì„±
- [ ] Google Search Console ë“±ë¡
- [ ] ğŸš€ **ëŸ°ì¹­!**

---

## 4. í•µì‹¬ ê¸°ëŠ¥ ëª…ì„¸

### 4.1 ì‚¬ìš©ì ê¸°ëŠ¥

| ê¸°ëŠ¥ | ì„¤ëª… |
|------|------|
| ì†Œì…œ ë¡œê·¸ì¸ | Google, Kakao ë¡œê·¸ì¸ |
| í”„ë¡œí•„ ê´€ë¦¬ | ë‹‰ë„¤ì„, í”„ë¡œí•„ ì´ë¯¸ì§€ ë³€ê²½ |
| ê°•ì˜ êµ¬ë§¤ | ì¥ë°”êµ¬ë‹ˆ, ê²°ì œ, ì¿ í° ì ìš© |
| ê°•ì˜ ì‹œì²­ | DRM ë¹„ë””ì˜¤ í”Œë ˆì´ì–´, ì§„ë„ ì €ì¥ |
| ìˆ˜ê°• í˜„í™© | ì§„ë„ìœ¨, ìˆ˜ë£Œì¦ ë°œê¸‰ |
| Q&A | ê°•ì˜ë³„ ì§ˆë¬¸/ë‹µë³€ |

### 4.2 ê´€ë¦¬ì ê¸°ëŠ¥

| ê¸°ëŠ¥ | ì„¤ëª… |
|------|------|
| ëŒ€ì‹œë³´ë“œ | ë§¤ì¶œ, ê°€ì…ì, í™œì„± ì‚¬ìš©ì í†µê³„ |
| íšŒì› ê´€ë¦¬ | ì¡°íšŒ, ê°•ì˜ ì§€ê¸‰, ê³„ì • ì •ì§€ |
| ê²°ì œ ê´€ë¦¬ | ê²°ì œ ë‚´ì—­, í™˜ë¶ˆ ì²˜ë¦¬ |
| ê°•ì˜ ê´€ë¦¬ | ë“±ë¡, ìˆ˜ì •, ì‚­ì œ, Vimeo ì—°ë™ |
| ì¿ í° ê´€ë¦¬ | ìƒì„±, ìˆ˜ì •, ì‚¬ìš© í˜„í™© |

---

## 5. ë°ì´í„°ë² ì´ìŠ¤ ì„¤ê³„

### 5.1 ERD

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  profiles   â”‚â”€â”€â”€â”€<â”‚ enrollments â”‚>â”€â”€â”€â”€â”‚   courses   â”‚
â”‚  (íšŒì›)     â”‚     â”‚  (ìˆ˜ê°•)     â”‚     â”‚   (ê°•ì˜)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚                   â”‚                   â”‚
      â”‚                   â”‚                   â”‚
      â–¼                   â–¼                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   orders    â”‚     â”‚  progress   â”‚     â”‚  sections   â”‚
â”‚   (ì£¼ë¬¸)    â”‚     â”‚  (ì§„ë„)     â”‚     â”‚  (ì„¹ì…˜)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚                                       â”‚
      â–¼                                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   credits   â”‚                         â”‚   lessons   â”‚
â”‚  (í¬ë ˆë”§)   â”‚                         â”‚  (ë ˆìŠ¨)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.2 ì£¼ìš” í…Œì´ë¸”

```sql
-- ê°•ì˜
CREATE TABLE courses (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  title TEXT NOT NULL,
  slug TEXT UNIQUE NOT NULL,
  description TEXT,
  thumbnail_url TEXT,
  price INT DEFAULT 0,
  sale_price INT,
  status TEXT DEFAULT 'draft', -- draft, published, archived
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW()
);

-- ì„¹ì…˜
CREATE TABLE sections (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  course_id UUID REFERENCES courses(id) ON DELETE CASCADE,
  title TEXT NOT NULL,
  order_num INT DEFAULT 0
);

-- ë ˆìŠ¨
CREATE TABLE lessons (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  section_id UUID REFERENCES sections(id) ON DELETE CASCADE,
  title TEXT NOT NULL,
  vimeo_id TEXT,
  duration INT DEFAULT 0, -- ì´ˆ ë‹¨ìœ„
  order_num INT DEFAULT 0,
  is_free BOOLEAN DEFAULT FALSE
);

-- ìˆ˜ê°•
CREATE TABLE enrollments (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID REFERENCES profiles(id) ON DELETE CASCADE,
  course_id UUID REFERENCES courses(id) ON DELETE CASCADE,
  created_at TIMESTAMPTZ DEFAULT NOW(),
  UNIQUE(user_id, course_id)
);

-- ì§„ë„
CREATE TABLE progress (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID REFERENCES profiles(id) ON DELETE CASCADE,
  lesson_id UUID REFERENCES lessons(id) ON DELETE CASCADE,
  watched_seconds INT DEFAULT 0,
  completed BOOLEAN DEFAULT FALSE,
  updated_at TIMESTAMPTZ DEFAULT NOW(),
  UNIQUE(user_id, lesson_id)
);

-- ì£¼ë¬¸
CREATE TABLE orders (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  order_number TEXT UNIQUE NOT NULL,
  user_id UUID REFERENCES profiles(id),
  total_amount INT NOT NULL,
  discount_amount INT DEFAULT 0,
  final_amount INT NOT NULL,
  status TEXT DEFAULT 'pending', -- pending, paid, cancelled, refunded
  payment_key TEXT,
  paid_at TIMESTAMPTZ,
  created_at TIMESTAMPTZ DEFAULT NOW()
);
```

---

## 6. ë³´ì•ˆ ë° ë²•ì  ì¤€ìˆ˜

### 6.1 ê°œì¸ì •ë³´ ì•”í˜¸í™” (AES-256 GCM)

ë¯¼ê°í•œ ê°œì¸ì •ë³´ëŠ” ì•”í˜¸í™”í•˜ì—¬ ì €ì¥í•˜ê³ , ê´€ë¦¬ì í˜ì´ì§€ì—ì„œë§Œ ë³µí˜¸í™”í•©ë‹ˆë‹¤.

```typescript
// lib/encryption.ts
import { createCipheriv, createDecipheriv, randomBytes } from 'crypto'

const ALGORITHM = 'aes-256-gcm'
const KEY = Buffer.from(process.env.ENCRYPTION_KEY!, 'hex')

export function encrypt(text: string): string {
  const iv = randomBytes(16)
  const cipher = createCipheriv(ALGORITHM, KEY, iv)

  let encrypted = cipher.update(text, 'utf8', 'hex')
  encrypted += cipher.final('hex')

  const authTag = cipher.getAuthTag()

  // iv:authTag:encrypted í˜•ì‹ìœ¼ë¡œ ì €ì¥
  return `${iv.toString('hex')}:${authTag.toString('hex')}:${encrypted}`
}

export function decrypt(encryptedData: string): string {
  const [ivHex, authTagHex, encrypted] = encryptedData.split(':')

  const iv = Buffer.from(ivHex, 'hex')
  const authTag = Buffer.from(authTagHex, 'hex')

  const decipher = createDecipheriv(ALGORITHM, KEY, iv)
  decipher.setAuthTag(authTag)

  let decrypted = decipher.update(encrypted, 'hex', 'utf8')
  decrypted += decipher.final('utf8')

  return decrypted
}
```

**ì•”í˜¸í™” ëŒ€ìƒ í•„ë“œ:**
- ì´ë©”ì¼ (email_encrypted)
- ì´ë¦„ (name_encrypted)
- IP ì£¼ì†Œ (ë¡œê·¸ í…Œì´ë¸”)

### 6.2 ì ‘ì† ë¡œê·¸ (í†µì‹ ë¹„ë°€ë³´í˜¸ë²• ì¤€ìˆ˜)

í†µì‹ ë¹„ë°€ë³´í˜¸ë²•ì— ë”°ë¼ **90ì¼ê°„** ì ‘ì† ê¸°ë¡ì„ ë³´ê´€í•©ë‹ˆë‹¤.

```sql
-- ì ‘ì† ë¡œê·¸ í…Œì´ë¸”
CREATE TABLE access_logs (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID REFERENCES profiles(id),
  action TEXT NOT NULL, -- login, logout, page_view, purchase
  ip_address_encrypted TEXT,
  user_agent TEXT,
  page_path TEXT,
  created_at TIMESTAMPTZ DEFAULT NOW()
);

-- 90ì¼ ì§€ë‚œ ë¡œê·¸ ìë™ ì‚­ì œ (Supabase Edge Function ë˜ëŠ” Cron)
CREATE OR REPLACE FUNCTION delete_old_logs()
RETURNS void AS $$
BEGIN
  DELETE FROM access_logs
  WHERE created_at < NOW() - INTERVAL '90 days';
END;
$$ LANGUAGE plpgsql;

-- pg_cron í™•ì¥ ì‚¬ìš© ì‹œ
SELECT cron.schedule('delete-old-logs', '0 3 * * *', 'SELECT delete_old_logs()');
```

### 6.3 RLS ì •ì±… ì˜ˆì‹œ

```sql
-- ê°•ì˜: ê³µê°œëœ ê°•ì˜ë§Œ ì¡°íšŒ ê°€ëŠ¥
CREATE POLICY "Public courses are viewable by everyone"
  ON courses FOR SELECT
  USING (status = 'published');

-- ìˆ˜ê°•: ë³¸ì¸ ìˆ˜ê°• ì •ë³´ë§Œ ì¡°íšŒ
CREATE POLICY "Users can view own enrollments"
  ON enrollments FOR SELECT
  USING (auth.uid() = user_id);

-- ì§„ë„: ë³¸ì¸ ì§„ë„ë§Œ ì¡°íšŒ/ìˆ˜ì •
CREATE POLICY "Users can manage own progress"
  ON progress FOR ALL
  USING (auth.uid() = user_id);
```

### 6.4 ë³´ì•ˆ ì²´í¬ë¦¬ìŠ¤íŠ¸

- [ ] ëª¨ë“  í…Œì´ë¸” RLS í™œì„±í™”
- [ ] ë¯¼ê° ì •ë³´ AES-256 ì•”í˜¸í™”
- [ ] ì ‘ì† ë¡œê·¸ 90ì¼ ë³´ê´€
- [ ] í™˜ê²½ ë³€ìˆ˜ì— ë¹„ë°€í‚¤ ì €ì¥ (ì½”ë“œì— í•˜ë“œì½”ë”© ê¸ˆì§€)
- [ ] HTTPS ê°•ì œ ì ìš©
- [ ] SQL Injection ë°©ì§€ (Prepared Statement)
- [ ] XSS ë°©ì§€ (React ìë™ ì´ìŠ¤ì¼€ì´í”„)
- [ ] CSRF í† í° ì ìš©

---

## 7. ì˜ˆìƒ ë¹„ìš©

### 7.1 ì´ˆê¸° ë¹„ìš©

| í•­ëª© | ë¹„ìš© | ë¹„ê³  |
|------|------|------|
| ë„ë©”ì¸ | â‚©15,000~30,000/ë…„ | .com ê¸°ì¤€ |

### 7.2 ì›”ê°„ ìš´ì˜ ë¹„ìš©

| í•­ëª© | ë¬´ë£Œ | Pro | ë¹„ê³  |
|------|------|-----|------|
| **Vercel** | âœ… | $20/ì›” | ì´ˆê¸° ë¬´ë£Œ ê°€ëŠ¥ |
| **Supabase** | âœ… | $25/ì›” | 500MB DB ë¬´ë£Œ |
| **Vimeo Premium** | - | **$75/ì›”** | DRM í•„ìˆ˜ |
| **Cloudflare R2** | âœ… | ì‚¬ìš©ëŸ‰ ê¸°ë°˜ | 10GB ë¬´ë£Œ |
| **í•©ê³„ (ë¬´ë£Œ)** | **~$75/ì›”** | | Vimeoë§Œ ìœ ë£Œ |
| **í•©ê³„ (Pro)** | **~$120/ì›”** | | íŠ¸ë˜í”½ ì¦ê°€ ì‹œ |

### 7.3 ê²°ì œ ìˆ˜ìˆ˜ë£Œ

| ê²°ì œ ìˆ˜ë‹¨ | ìˆ˜ìˆ˜ë£Œ |
|----------|--------|
| í† ìŠ¤í˜ì´ë¨¼ì¸  | 2.5~3.5% |

---

## 8. ì²´í¬ë¦¬ìŠ¤íŠ¸

### 8.1 ì „ì²´ ì§„í–‰ ì²´í¬ë¦¬ìŠ¤íŠ¸

#### Step 1: í”„ë¡œì íŠ¸ ì´ˆê¸° ì„¤ì • + ëœë”© í˜ì´ì§€
- [ ] Next.js í”„ë¡œì íŠ¸ ìƒì„±
- [ ] TypeScript + Tailwind + shadcn/ui ì„¤ì •
- [ ] Git + GitHub ì—°ë™
- [ ] ëœë”© í˜ì´ì§€ 6ê°œ ì„¹ì…˜ ì™„ì„±
- [ ] ì´ë¯¸ì§€ WebP ìµœì í™”

#### Step 2: ë„ë©”ì¸ ì—°ê²° + ë°°í¬
- [ ] Vercel ë°°í¬
- [ ] ë„ë©”ì¸ êµ¬ë§¤
- [ ] Cloudflare DNS ì„¤ì •
- [ ] SSL í™•ì¸

#### Step 3: DB + íšŒì›ê°€ì…
- [ ] Supabase í”„ë¡œì íŠ¸ ìƒì„±
- [ ] profiles í…Œì´ë¸” + RLS
- [ ] Google OAuth ì„¤ì •
- [ ] Kakao OAuth ì„¤ì •
- [ ] ë¡œê·¸ì¸/íšŒì›ê°€ì… UI

#### Step 4: ì €ì¥ì†Œ + ê²°ì œ
- [ ] Vimeo Premium ì„¤ì •
- [ ] ë¹„ë””ì˜¤ í”Œë ˆì´ì–´ êµ¬í˜„
- [ ] Cloudflare R2 ì—°ë™
- [ ] í† ìŠ¤í˜ì´ë¨¼ì¸  ì—°ë™
- [ ] ê²°ì œ í”„ë¡œì„¸ìŠ¤ ì™„ì„±

#### Step 5: ê´€ë¦¬ì + ìš´ì˜
- [ ] ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ
- [ ] íšŒì›/ê²°ì œ/ê°•ì˜ ê´€ë¦¬
- [ ] ê°œì¸ì •ë³´ ì•”í˜¸í™”
- [ ] ì ‘ì† ë¡œê·¸ ì‹œìŠ¤í…œ

#### Step 6: ìµœì¢… ì ê²€ + ëŸ°ì¹­
- [ ] ë³´ì•ˆ ì ê²€
- [ ] ì„±ëŠ¥ ìµœì í™”
- [ ] ë°˜ì‘í˜• í…ŒìŠ¤íŠ¸
- [ ] ì½”ë“œ ì •ë¦¬
- [ ] ğŸš€ ëŸ°ì¹­

---

## 9. ì°¸ê³  ìë£Œ

### ê³µì‹ ë¬¸ì„œ
- [Next.js Documentation](https://nextjs.org/docs)
- [Supabase Documentation](https://supabase.com/docs)
- [Vimeo Developer API](https://developer.vimeo.com)
- [í† ìŠ¤í˜ì´ë¨¼ì¸  ê°œë°œìì„¼í„°](https://docs.tosspayments.com)
- [Cloudflare R2 Documentation](https://developers.cloudflare.com/r2)
- [shadcn/ui](https://ui.shadcn.com)

### ê°œë°œ ë„êµ¬
- [Cursor](https://cursor.com) - AI ì½”ë”© ì—ë””í„°
- [Claude](https://claude.ai) - AI ì–´ì‹œìŠ¤í„´íŠ¸

---

> **ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸**: 2026ë…„ 1ì›” 3ì¼  
> **ë¬¸ì„œ ë²„ì „**: 2.0.0

